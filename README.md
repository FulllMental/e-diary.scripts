# Scripts.py для электронного дневника

<h1 id="about"> О чём проект </h1>

Данный репозиторий содержит файл со скриптами `scripts.py`, которые написаны для исправления значений в базе данных школьного электронного дневника.

Репозиторий самого электронного дневника доступен по ссылке: https://github.com/devmanorg/e-diary/

Перед запуском скрипта, нужно развернуть у себя сайт электронного дневника и создать/получить файл с БД. Как это сделать указано [здесь](https://github.com/devmanorg/e-diary/blob/master/README.md).

[Исправить оценки](#fix_marks)

[Помочь друзьям](#help_friends)

[Многократное использование](#reuse)

[Ошибки ввода](#input_mistakes)

[Что за проект?](#what_is_it)

[Хочу такой же](#want_same)

<h2 id="fix_marks"> 1. Исправить оценки </h2>

Python3 должен быть уже установлен. 
Затем используйте `pip` (или `pip3`, есть конфликт с Python2) для установки зависимостей:
```
pip install -r requirements.txt
```
- Добавить файл `scripts.py` и `.env` файл в папку с `manage.py`
- Запустить через командную строку `Django shell` командой:
```commandline
python manage.py shell
```
- Импортировать скрипты для изменения данных:
```commandline
import scripts
```
#### _Теперь всё зависит от того, что необходимо сделать_
- Для того, чтобы исправить оценки Ивана:
```commandline
scripts.fix_marks('Фролов Иван')
```
- Для того, чтобы удалить все замечания Ивана:
```commandline
scripts.remove_chastisements('Фролов Иван')
```
- Для того, чтобы добавить похвалу Ивану к случайному уроку конкретного предмета:
```commandline
scripts.create_commendation('Фролов Иван', 'Музыка')
```


<h2 id="help_friends"> 2. Помочь друзьям </h2>

Для того чтобы Иван мог помочь друзьям, ему предстоит подставить ФИО своих друзей в функции:

- Запустить через командную строку `Django shell` командой:
```commandline
python manage.py shell
```
- Импортировать скрипты для изменения данных:
```commandline
import scripts
```
#### _Теперь всё зависит от того, что необходимо сделать_

- Для того чтобы исправить оценки друга:
```commandline
scripts.fix_marks('Петров Петр')
```
- Для того, чтобы удалить все замечания ученика:
```commandline
scripts.remove_chastisements('Петров Петр')
```
- Для того чтобы добавить похвалу к случайному уроку:
```commandline
scripts.create_commendation('Петров Петр', 'Музыка')
```

Петров в школе может быть много, как и Петровых, поэтому желательно заполнять ФИО полностью, в последовательности `'Фамилия Имя Отчество'`


<h2 id="reuse"> 3. Многократное использование </h2>
## 3. Многократное использование

В скрипте добавляющей похвалу по предмету, определенному ученику (`create_commendation`) заложена возможность
считывать до 30 различных видов похвалы из `.env` файла.


Заполнить его можно подобным образом:
```commandline
COMMENDATIONS='Молодец!,Хорошо!,Продолжай в том же духе!'
```

При активации скрипта, похвала, как и дата урока по конкретному предмету выбирается случайным способом.
Для этого делать ничего не нужно, достаточно вызвать скрипт повторно.

<h2 id="input_mistakes"> 4. Ошибки ввода </h2>

В случае ошибки в имени/названии предмета, отсутствии у ученика уроков по существующему предмету или при наличии большого количества 'Петровых Петров', программа прервёт дальнейшую работу и выведет оповещение о том, что конкретно произошло.

_Пример:_
```commandline
scripts.fix_marks('Степан')
Слишком много совпадений! Уточните ФИО ученика...
Из-за ошибки поиска ученика дальше программа выполниться не может...

scripts.remove_chastisements('Gtnh Gtnhjd')
Слишком много совпадений! Уточните ФИО ученика...
Из-за ошибки поиска ученика дальше программа выполниться не может...

scripts.create_commendation('Петр Петров', 'Математич') 
Либо нет такого предмета, либо предмет написан с ошибкой...

scripts.create_commendation('Фролов Иван', '') 
Либо нет такого предмета, либо предмет написан с ошибкой...

scripts.create_commendation('Фролов Иван', 'Математический анализ') 
Уроков по этому предмету у ученика не найдено, возможно их пока не было и стоит уточнить ФИО...
```

<h2 id="what_is_it"> 5. Что за проект? </h2>

Скрипты написаны в учебных целях, в рамках урока курсов сайта [DVMN](https://dvmn.org)  по работе с `Django ORM` м базами данных через `Django shell`.


<h2 id="want_same"> 6. Хочу такой же </h2>

Файл `scripts.py` содержит в себе следующие скрипты:
- `find_schoolkid` - вспомогательный скрипт для поиска ученика по БД, отлавливающий исключения и выводящий подсказку
в чём может быть ошибка с запрашиваемым ФИО/ИО. Каждый последующий скрипт обрабатывает запрашиваемое ФИО/ИО через него.
- `fix_marks` - скрипт принимает на вход ФИО/ИО ученика, фильтрующий все оценки ученика и исправляющий все что ниже 4ки на 5.
 Если ученик не был найден или *наоборот* было найдено больше одного совпадения по введенному ФИО/ИО, то скрипт предупредит об этом и закончит работу.

*Пример удачного выполнения скрипта:*
```commandline
scripts.fix_marks('Фролов Иван') 
Все плохие оценки исправлены...
```

- `remove_chastisements` - скрипт принимает на вход ФИО/ИО ученика, ищущий все замечания ученика и удаляющий их.

*Пример удачного выполнения скрипта:*
```commandline
scripts.remove_chastisements('Фролов Иван') 
Все замечания ученика удалены...
```
- `create_commendation` - скрипт принимает на вход ФИО/ИО ученика и название предмета, ищет все записи о уроках по данному предмету проходивших
у ученика ФИО/ИО которого было введено. Похвала как и конкретная дата урока выбирается случайным образом и добавляется в базу данных.

*Пример удачного выполнения скрипта:*
```commandline
scripts.create_commendation('Фролов Иван') 
Похвала ученику добавлена...
```

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).
